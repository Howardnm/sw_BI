{% extends "layout.html" %}

{% block content %}
    <div class="container-fluid">
        <div style="margin-bottom: 10px;">
            <a class="btn btn-primary" href="/salesdata/add">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                添加销售信息
            </a>
            <a class="btn btn-primary" href="/salesdata/add">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                导入销售信息
            </a>
            <a class="btn btn-primary" id="btnSearch">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                搜索
            </a>

            <!-- 新建/编辑 对话框 -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">搜索</h4>
                        </div>
                        <div class="modal-body">
                            <form method="get">
                                <div class="row">
                                    <div class="form-group">
                                        {% for search in search_form %}
                                            <div class="col-xs-6">
                                                <input type="{{ search.type }}" name="{{ search.name }}"
                                                       class="form-control"
                                                       placeholder="{{ search.label }}" value="{{ search.value }}">
                                            </div>
                                        {% endfor %}
                                        <div class="col-xs-1">
                                            <button class="btn btn-default" type="submit">
                                                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">取 消</button>
                            <button id="btnSave" type="button" class="btn btn-primary">搜 索</button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->


        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
                大信息列表
            </div>
            <div style="overflow-x: auto; white-space: nowrap;">
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>日期</th>
                        <th>单据编号</th>
                        <th>购货公司</th>
                        <th>k3</th>
                        <th>产品名称</th>
                        <th>规格型号</th>
                        <th>实发数量(Kg)</th>
                        <th>部门</th>
                        <th>业务员</th>
                        <th>销售单价(元/Kg)</th>
                        <th>不含税单价(元/Kg)</th>
                        <th>实际购货公司</th>
                        <th>供货基地</th>
                        <th>内外销</th>
                        <th>产品分类</th>
                        <th>贸易类型</th>
                        <th>新老客户</th>
                        <th>产品线</th>
                        <th>主打产品</th>
                        <th>订单类别</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for obj in queryset %}
                        <tr>
                            <th>{{ obj.date }}</th>
                            <td>{{ obj.order_number }}</td>
                            <td>{{ obj.client_company }}</td>
                            <td>{{ obj.k3 }}</td>
                            <td>{{ obj.product_name }}</td>
                            <td>{{ obj.product_specification }}</td>
                            <td>{{ obj.sales_volume }}</td>
                            <td>{{ obj.department }}</td>
                            <td>{{ obj.salesperson }}</td>
                            <td>{{ obj.gross_unit_price }}</td>
                            <td>{{ obj.net_unit_price }}</td>
                            <td>{{ obj.actual_client_company }}</td>
                            <td>{{ obj.supply_company }}</td>
                            <td>{{ obj.intra_group_or_external_sales }}</td>
                            <td>{{ obj.product_domain_groups }}</td>
                            <td>{{ obj.business_trade_categories }}</td>
                            <td>{{ obj.new_and_returning_customers }}</td>
                            <td>{{ obj.product_category }}</td>
                            <td>{{ obj.core_product }}</td>
                            <td>{{ obj.order_type }}</td>
                            <td>
                                <a class="btn btn-xs btn-primary" href="/salesdata/{{ obj.id }}/edit">编辑</a>
                                <a class="btn btn-xs btn-danger" href="/salesdata/{{ obj.id }}/delete">删除</a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>
        <div>
            <ul class="pagination">
                {{ page_string }}
            </ul>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script type="text/javascript">
        $(function () {
            bindBtnSearchEvent();
        })

        // 弹出新建订单的对话框
        function bindBtnSearchEvent() {
            $("#btnSearch").click(function () {
                // 将正在编辑的ID设置成空
                EDIT_ID = undefined;
                // 点击新建按钮，显示对话框
                $("#myModal").modal("show");
            });
        }
    </script>
{% endblock %}

